/*!
    *
    * Wijmo Library 5.20221.857
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(o,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(o,t)};return function(o,t){extendStatics(o,t);function __(){this.constructor=o}o.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();!function(o){!function(t){!function(t){"use strict";var e=function(o){__extends(_MultiRow,o);function _MultiRow(t,e){var n=o.call(this,t)||this;n._idxData=e;return n}return _MultiRow}(o.grid.Row);t._MultiRow=e}(t.transposedmultirow||(t.transposedmultirow={}))}(o.grid||(o.grid={}))}(wijmo||(wijmo={}));!function(o){!function(t){!function(t){"use strict";var e=function(t){__extends(_Cell,t);function _Cell(e){var n=t.call(this)||this;n._row=n._col=0;n._rowspan=n._colspan=1;o.copy(n,e);return n}Object.defineProperty(_Cell.prototype,"row",{get:function(){return this._row},set:function(t){this._row=o.asInt(t,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"col",{get:function(){return this._col},set:function(t){this._col=o.asInt(t,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"colspan",{get:function(){return this._colspan},set:function(t){this._colspan=o.asInt(t,!1,!0);o.assert(this._colspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"rowspan",{get:function(){return this._rowspan},set:function(t){this._rowspan=o.asInt(t,!1,!0);o.assert(this._rowspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});return _Cell}(o.grid.Column);t._Cell=e}(t.transposedmultirow||(t.transposedmultirow={}))}(o.grid||(o.grid={}))}(wijmo||(wijmo={}));!function(o){!function(t){!function(t){"use strict";var e=function(e){__extends(_CellGroup,e);function _CellGroup(t,n){var r=e.call(this)||this;r._colstart=0;r._rowstart=0;r._layout=t;r._g=t._grid;o.copy(r,n);if(!r._cells)throw"Cell group with no cells?";var i=0,l=0;r._cells.forEach((function(o,t){for(;!r._cellFits(o,t,i,l);)0==(l=(l+1)%r.colspan)&&i++;o.row=i;o.col=l}));var s=1,a=1;r._cells.forEach((function(o){s=Math.max(s,o.row+o.rowspan);a=Math.max(a,o.col+o.colspan)}));r.rowspan=s;r.colspan=a;return r}_CellGroup.prototype._copy=function(e,n){var r=this;if("cells"==e){this._cells=[];o.isArray(n)&&n.forEach((function(e){var n=new t._Cell(e);n.binding&&!n.header&&(n.header=o.toHeaderCase(n.binding));r._cells.push(n);r.colspan=Math.max(r.colspan,n.colspan)}));return!0}return!1};Object.defineProperty(_CellGroup.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0});_CellGroup.prototype.closeGroup=function(t){var e=this;if(t>this.colspan){this._cells.forEach((function(o){o.col==e.colspan-1&&(o.colspan=t-o.col)}));this.colspan=t}this._cells.forEach((function(o){for(;o.col+o.colspan<e.colspan&&!e._slotTaken(o.row,o.col+o.colspan);)o.colspan++}));this._cells.forEach((function(o){for(;o.row+o.rowspan<e.rowspan&&!e._slotTaken(o.row+o.rowspan,o.col);)o.rowspan++}));for(var n=0;n<this.rowspan;n++)for(var r=0;r<this.colspan;r++)o.assert(this._slotTaken(n,r),"Invalid layout (empty cells).");this._cols=new o.grid.ColumnCollection(this._g,this._g.columns.defaultSize);this._rng=new Array(t*this.rowspan);this._cells.forEach((function(t){for(var n=0;n<t.rowspan;n++)for(var r=0;r<t.colspan;r++){var i=(t.row+n)*e.colspan+(t.col+r);e._cols.setAt(i,t);var l=new o.grid.CellRange(t.row,t.col,t.row+t.rowspan-1,t.col+t.colspan-1);l.isSingleCell||(e._rng[i]=l)}}));this._rng[-1]=new o.grid.CellRange(this._rowstart,this._colstart,this._rowstart+this._rowspan-1,this._colstart)};_CellGroup.prototype.getMergedRange=function(t,e,n){if(n<0)return this._rng[-1];var r=e-this._rowstart,i=n%this.colspan,l=this._rng[r*this.colspan+i];t.cellType==o.grid.CellType.RowHeader&&n++;var s=e-r,a=n-i;return l?new o.grid.CellRange(s+l.row,a+l.col,s+l.row2,a+l.col2):null};_CellGroup.prototype.getBindingColumn=function(o,t,e){if(e<0)return this;var n=t-this._rowstart,r=e%this.colspan;return this._cols[n*this.colspan+r]};_CellGroup.prototype._cellFits=function(o,t,e,n){if(n>0&&n+o.colspan>this.colspan)return!1;for(var r=0;r<o.colspan;r++)if(this._slotTaken(e,n+r,t))return!1;this.colspan=Math.max(this.colspan,n+o.colspan-1);return!0};_CellGroup.prototype._slotTaken=function(o,t,e){void 0===e&&(e=this._cells.length);for(var n=0;n<e;n++){var r=this._cells[n];if(o>=r.row&&o<=r.row+r.rowspan-1&&t>=r.col&&t<=r.col+r.colspan-1)return!0}return!1};_CellGroup.prototype._updateCellTypes=function(t){this._cols.forEach((function(e){var n=e;null==n.dataType&&n._binding&&(n.dataType=o.getType(n._binding.getValue(t)))}))};return _CellGroup}(t._Cell);t._CellGroup=e}(t.transposedmultirow||(t.transposedmultirow={}))}(o.grid||(o.grid={}))}(wijmo||(wijmo={}));!function(o){var t;(function(t){"use strict";var e=function(e){__extends(_MergeManager,e);function _MergeManager(){return null!==e&&e.apply(this,arguments)||this}_MergeManager.prototype.getMergedRange=function(e,n,r,i){void 0===i&&(i=!0);var l=e.grid;if(n<0||n>=e.rows.length||r<0||r>=e.columns.length)return null;switch(e.cellType){case o.grid.CellType.Cell:case o.grid.CellType.RowHeader:var s=e.rows[n].dataItem._rowInfo.index,a=r;e.cellType==o.grid.CellType.RowHeader&&a--;var u=l._getGroupByRow(n);o.assert(u instanceof t._CellGroup,"Failed to get the group!");var c=u.getMergedRange(e,s,a);if(c){var p=s,d=n;if(n>0){p=e.rows[n-1].dataItem._rowInfo.index;d=n-1}c.row<=p?c.row=d:c.row=n;var g=s,w=n;if(n<e.rows.length-1){g=e.rows[n+1].dataItem._rowInfo.index;w=n+1}c.row2>=g?c.row2=w:c.row2=n}o.assert(!c||c.contains(n,r),"Merged range must contain source cell");return c;case o.grid.CellType.ColumnHeader:var f=l.columnsPerItem,_=r-r%f,h=Math.min(_+f-1,e.columns.length-1);return new o.grid.CellRange(0,_,e.rows.length-1,h);case o.grid.CellType.TopLeft:return new o.grid.CellRange(0,0,e.rows.length-1,e.columns.length-1)}return null};return _MergeManager}(o.grid.MergeManager);t._MergeManager=e})((t=o.grid||(o.grid={})).transposedmultirow||(t.transposedmultirow={}))}(wijmo||(wijmo={}));!function(o){var t;(function(o){"use strict";var t=function(){function _MultiRowLayout(o,t){this._columnsPerItem=1;this._bindingGroups=[];this._groupsByRow={};this._grid=o;this._bindingGroups=this._parseCellGroups(t)}Object.defineProperty(_MultiRowLayout.prototype,"totalRowSpan",{get:function(){var o=this._bindingGroups;if(o&&o.length){var t=o[o.length-1];return t._rowstart+t.rowspan}return 0},enumerable:!0,configurable:!0});_MultiRowLayout.prototype._parseCellGroups=function(t){var e=[],n=1;if(t){for(var r=0,i=0;r<t.length;r++){var l=new o._CellGroup(this,t[r]);l._rowstart=i;i+=l._rowspan;n=Math.max(n,l._colspan);e.push(l)}e.forEach((function(o){o.closeGroup(n)}));this._columnsPerItem=n}return e};_MultiRowLayout.prototype._getGroupByRow=function(o){var t=this._getGroupIndexByRow(o);return t>-1?this._bindingGroups[t]:null};_MultiRowLayout.prototype._getGroupIndexByRow=function(o){var t=this._groupsByRow[o];if(t)return t;for(var e=this._bindingGroups,n=0;n<e.length;n++){var r=e[n];if(o>=r._rowstart&&o<=r._rowstart+r._rowspan-1){this._groupsByRow[o]=n;return n}}return-1};_MultiRowLayout.prototype._updateCellTypes=function(o){this._bindingGroups.forEach((function(t){t._updateCellTypes(o)}))};return _MultiRowLayout}();o._MultiRowLayout=t})((t=o.grid||(o.grid={})).transposedmultirow||(t.transposedmultirow={}))}(wijmo||(wijmo={}));!function(o){!function(t){!function(t){"use strict";var e=function(e){__extends(TransposedMultiRow,e);function TransposedMultiRow(n,r){var i=e.call(this,n)||this;i._currentPos=-1;i._bindingColumns={};i._keyPrefix="item";o.addClass(i.hostElement,"wj-transposed-multirow");i._layout=new t._MultiRowLayout(i,null);i.allowDragging=o.grid.AllowDragging.None;i.allowSorting=o.grid.AllowSorting.None;i.mergeManager=new t._MergeManager;i.formatItem.addHandler(i._formatItem,i);i._rowInfo=new o.grid.ColumnCollection(i,i.columns.defaultSize);i.initialize(r);i._rowInfo.collectionChanged.addHandler(i._rowInfoChanged,i);return i}Object.defineProperty(TransposedMultiRow.prototype,"layoutDefinition",{get:function(){return this._layoutDef},set:function(e){this._layoutDef=o.asArray(e);this._layout=new t._MultiRowLayout(this,e);this._rowInfoChanged()},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.getBindingColumn=function(t,e,n){if(t.cellType!=o.grid.CellType.Cell)return null;var r=t.rows[e].dataItem._rowInfo.index,i=r+"_"+n,l=this._bindingColumns[i];if(l)return l;var s=this._getGroupByRow(e).getBindingColumn(t,r,n);if(s){l=new o.grid.Column;o.grid.FlexGrid._getSerializableProperties(o.grid.Column).forEach((function(o){null!=s[o]&&(l[o]=s[o])}));var a=Math.floor(n/this.columnsPerItem),u=n%this.columnsPerItem;l.binding=this._keyPrefix+a+"_"+u;this._bindingColumns[i]=l}return l};Object.defineProperty(TransposedMultiRow.prototype,"columnsPerItem",{get:function(){return this._layout._columnsPerItem},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowAddNew",{get:function(){return!1},set:function(t){o.assert(!t,"TransposedMultiRow does not support items addition.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDelete",{get:function(){return!1},set:function(t){o.assert(!t,"TransposedMultiRow does not support items deletion.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDragging",{get:function(){return o.grid.AllowDragging.None},set:function(t){o.assert(t===o.grid.AllowDragging.None,"TransposedMultiRow does not support dragging.");if(t!==this._alDragging){this._alDragging=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowPinning",{get:function(){return!1},set:function(t){o.assert(!t,"TransposedMultiRow does not support pinning.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowSorting",{get:function(){return o.grid.AllowSorting.None},set:function(t){o.assert(t===o.grid.AllowSorting.None,"TransposedMultiRow does not support sorting.");this._alSorting=t},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"columnLayout",{get:function(){throw"TransposedMultiRow does not support column layout."},set:function(o){throw"TransposedMultiRow does not support column layout."},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.refresh=function(o){var t=this._rowInfo;if(t._dirty){t._dirty=!1;this._rowInfoChanged()}else e.prototype.refresh.call(this,o)};TransposedMultiRow.prototype.onLoadedRows=function(t){for(var n=this,r=this.columnHeaders.columns,i=0;i<r.length;i++)this.columnHeaders.setCellData(0,i,"");var l=this.columns;for(i=0;i<l.length;i++){var s=l[i];s.align=null;s.dataType=0}var a=this.rowHeaders.columns;this.rows.forEach((function(t){var e=t.dataItem._rowInfo;if(e)for(var r=a.length-2;r>=0;r--){var i=e.headers[r]||o.toHeaderCase(e.bindings[r]);n.rowHeaders.setCellData(t.index,r+1,i)}}));a[0].visible=!1;for(i=1;i<a.length;i++){a[i].align="left";a[i].visible=!0;a[i].width=this.columns.defaultSize}e.prototype.onLoadedRows.call(this,t)};TransposedMultiRow.prototype._getGroupByRow=function(e){var n=this.cells.rows[e].dataItem._rowInfo.index,r=this._layout._getGroupByRow(n);o.assert(r instanceof t._CellGroup,"Failed to get the group!");return r};TransposedMultiRow.prototype._addBoundRow=function(o,e){var n=o[e];this.rows.push(new t._MultiRow(n,e))};TransposedMultiRow.prototype._updateColumnTypes=function(){e.prototype._updateColumnTypes.call(this);var t=this.collectionView;if(o.hasItems(t)&&this._layout){var n=t.items[0]._arr;n&&n.length>0&&this._layout._updateCellTypes(n[0])}};TransposedMultiRow.prototype._getBindingColumn=function(o,t,n){if(this._layout){o==this.cells&&(n=this.getBindingColumn(o,t,n.index));return n}return e.prototype._getBindingColumn.call(this,o,t,n)};TransposedMultiRow.prototype._isTransposed=function(){return!0};TransposedMultiRow.prototype._autoSizeRows=function(){this.autoSizeMode&o.grid.AutoSizeMode.Both&&this.autoSizeRows()};TransposedMultiRow.prototype.onRowEditEnded=function(t){if(null!=this._view){var n=new o.collections.NotifyCollectionChangedEventArgs(o.collections.NotifyCollectionChangedAction.Change);this._view.collectionChanged.raise(this._view,n)}e.prototype.onRowEditEnded.call(this,t)};TransposedMultiRow.prototype._getCollectionView=function(t){var n=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(o.isArray(t))t=this._transposeItemsSource(t);else if(t){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=o.tryCast(t,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);t instanceof o.collections.CollectionView&&(n=t.getError);t=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var r=e.prototype._getCollectionView.call(this,t);r&&this._currentPos>=0&&(r.currentPosition=Math.min(r.items.length-1,this._currentPos));n&&r instanceof o.collections.CollectionView&&(r.getError=function(o,t){if(null==t)return null;var e=o._keys.indexOf(t),r=e%o._bnd.length,i=Math.floor(e/o._bnd.length);return n(o._arr[i],o._bnd[r].path)});return r};TransposedMultiRow.prototype._rowInfoChanged=function(){try{var o=this.collectionView;this._currentPos=o?o.currentPosition:-1;var t=this.selection;this._bindingColumns={};var e=this.itemsSource;this.itemsSource=null;this.itemsSource=e;t&&t.isValid&&(this.selection=t)}finally{this._currentPos=-1}};TransposedMultiRow.prototype._formatItem=function(t,e){var n=this.columnsPerItem,r=e.panel,i=r.cellType,l=r.rows[e.range.row],s=(r.rows[e.range.row2],e.cell);i==o.grid.CellType.RowHeader&&o.toggleClass(s,"wj-group-header",0==e.range.row);if(i==o.grid.CellType.Cell||i==o.grid.CellType.RowHeader){var a=this._getGroupByRow(e.row);o.toggleClass(s,"wj-group-start",a._rowstart==e.range.row);o.toggleClass(s,"wj-group-end",a._rowstart+a._rowspan-1==e.range.row2)}if(n>1&&(i==o.grid.CellType.Cell||i==o.grid.CellType.ColumnHeader)){o.toggleClass(s,"wj-record-start",e.range.col%n==0);o.toggleClass(s,"wj-record-end",e.range.col2%n==n-1)}var u=this.alternatingRowStep;if(u&&i==o.grid.CellType.Cell){var c=this._layout.totalRowSpan,p=this._layout._bindingGroups.length,d=Math.floor(l.dataIndex/c)*p,g=l.dataIndex%c,w=(d+=this._layout._getGroupIndexByRow(g)+1)%(u+1)==0;o.toggleClass(s,"wj-alt",w)}if(i==o.grid.CellType.RowHeader){var f=l.dataItem._rowInfo,_=(a=this._getGroupByRow(e.row)).getBindingColumn(r,f.index,e.col);o.toggleClass(s,"wj-wrap",_.wordWrap)}};TransposedMultiRow.prototype._sourceViewChanged=function(o,t){this.activeEditor||this.invalidate()};TransposedMultiRow.prototype._transposeItemsSource=function(t){var e=this,n=new o.collections.ObservableArray;if(this._layout&&this._layout._bindingGroups.length){this._getRowInfo(t).forEach((function(o,r){var i=e._createKeys(t);if(e._supportsProxies()){var l=e._createProxy(t,o,i);n.push(l)}else{var s=e._createTransposedObject(t,o,i);n.push(s)}}));t instanceof o.collections.ObservableArray&&t.collectionChanged.addHandler((function(t,r){if(r.action===o.collections.NotifyCollectionChangedAction.Change)e.activeEditor||e.invalidate();else{var i=new o.collections.NotifyCollectionChangedEventArgs(o.collections.NotifyCollectionChangedAction.Reset);n.onCollectionChanged(i);e._rowInfoChanged()}}))}return n};TransposedMultiRow.prototype._createKeys=function(o){var t=this,e=Array.apply(null,{length:this.columnsPerItem}),n=o.map((function(o,n){return e.map((function(o,e){return t._keyPrefix+n+"_"+e}))}));return[].concat.apply([],n)};TransposedMultiRow.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedMultiRow.prototype._createProxy=function(t,e,n){var r={_arr:t,_rowInfo:e,_bnd:e.bindings.map((function(t){return new o.Binding(t)})),_keys:n};return new Proxy(r,{ownKeys:function(o){return o._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(o,t){var e=o._keys.indexOf(t);if(e>-1){var n=o._bnd,r=o._arr,i=n.length,l=e%i,s=Math.floor(e/i);return n[l].getValue(r[s])}return o[t]},set:function(t,e,n){var r=t._keys.indexOf(e);if(r>-1){var i=t._bnd,l=t._arr,s=i.length,a=r%s,u=Math.floor(r/s);i[a].setValue(l[u],n);if(l instanceof o.collections.ObservableArray||l instanceof o.collections.CollectionView){var c=new o.collections.NotifyCollectionChangedEventArgs(o.collections.NotifyCollectionChangedAction.Change,l[u],u);l.onCollectionChanged(c)}return!0}return!1}})};TransposedMultiRow.prototype._createTransposedObject=function(t,e,n){for(var r={_arr:t,_rowInfo:e,_bnd:e.bindings.map((function(t){return new o.Binding(t)})),_keys:n},_loop_1=function(e){var i=n[e];Object.defineProperty(r,i,{enumerable:!0,get:function(){var o=r._bnd,n=o.length,i=e%n,l=Math.floor(e/n);return o[i].getValue(t[l])},set:function(n){var i=r._bnd,l=i.length,s=e%l,a=Math.floor(e/l);i[s].setValue(t[a],n);if(t instanceof o.collections.ObservableArray){var u=new o.collections.NotifyCollectionChangedEventArgs(o.collections.NotifyCollectionChangedAction.Change,t[a],a);t.onCollectionChanged(u)}return!0}})},i=0;i<n.length;i++)_loop_1(i);return r};TransposedMultiRow.prototype._getRowInfo=function(t){var e=[];if(this._layout){for(var n=this.rowHeaders.columns,r=this.columnsPerItem+1;n.length>r;)n.removeAt(n.length-1);for(;n.length<r;)n.push(new o.grid.Column);this._layout._bindingGroups.forEach((function(o){for(var t=0;t<o.rowspan;t++){for(var n={index:o._rowstart+t,bindings:[],headers:[]},r=0;r<o.colspan;r++)for(var i=0;i<o.cells.length;i++){var l=o.cells[i];if(t>=l.row&&t<l.row+l.rowspan&&r>=l.col&&r<l.col+l.colspan){n.bindings.push(l.binding);n.headers.push(l.header);break}}e.push(n)}}))}return e};return TransposedMultiRow}(o.grid.FlexGrid);t.TransposedMultiRow=e}(t.transposedmultirow||(t.transposedmultirow={}))}(o.grid||(o.grid={}))}(wijmo||(wijmo={}));!function(o){!function(t){t.transposedmultirow||(t.transposedmultirow={}),o._registerModule("wijmo.grid.transposedmultirow",o.grid.transposedmultirow)}(o.grid||(o.grid={}))}(wijmo||(wijmo={}));